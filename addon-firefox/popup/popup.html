<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    .settings-container { display: flex; flex-direction: column; gap: 8px; max-height: 0; opacity: 0; transition: all 0.3s ease; margin-top: 10px; }
    .settings-container.visible { max-height: 170px; opacity: 1; }
    .import-export-container { display: flex; flex-direction: column; gap: 8px; max-height: 0; opacity: 0; transition: all 0.3s ease; margin-top: 10px; overflow: hidden; }
    .import-export-container.visible { max-height: 400px; opacity: 1; }
    .settings-row { display: flex; align-items: center; gap: 8px; width: 100%; }
    .settings-row span { white-space: nowrap; min-width: 70px; }
    .settings-row input[type="text"] { flex: 1; min-width: 0; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
    .settings-row input[type="number"] { width: 40px; flex: none; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
    .settings-row:last-child { display: flex; justify-content: space-between; gap: 8px; }
    .settings-row:last-child select { flex: 1; }
    .settings-row:last-child .save-btn { flex: none; white-space: nowrap; }
    
    .delete-btn { position: absolute; top: 10px; right: 10px; cursor: pointer; border: none; background: none; z-index: 10; }
    .delete-btn img { width: 20px; height: 20px; opacity: 0.6; }      
    h3 { font-family: Arial; font-size: 16px; margin: 0 0 10px; color: #333; position: relative; z-index: 1; }
    .dev { margin-top: 10px; font-size: 11px; color: #668; text-align: center; margin-bottom: 5px;}
    .history-title { font-size: 12px; color: #668; margin-bottom: 5px; }
    .history-list { list-style: none; margin: 0; padding: 0; max-height: 150px; overflow-y: auto;}
    .history-item { display: flex; justify-content: space-between; font-size: 12px; padding: 3px 0; border-bottom: 1px solid #eee; background-color: rgba(255,255,255,0.5);}
    .history-time { color: #668; margin-right: 10px;}
    .history-price { color: #2c7a2c; font-weight: bold;}
    .price-row { display: flex; justify-content: space-between; margin: 5px 0;}
    .price-label { color: #668; font-size: 13px;}
    .price-value { color: #2a6496; font-weight: bold;}
    .product-link:hover { text-decoration: underline;}
    .settings-btn { position: absolute; top: 10px; right: 40px; border: none; background: none; cursor: pointer; font-size: 1.2em; z-index: 10; }
    .import-export-btn { position: absolute; top: 10px; right: 10px; border: none; background: none; cursor: pointer; font-size: 1.2em; z-index: 10; }
    .save-btn { padding: 8px 15px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
    .action-btn { padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 2px; position: relative; z-index: 10; }
    .action-btn.secondary { background: #6c757d; }
    #items { margin-top: 5px; position: relative; z-index: 1; }

    .highlight { animation: highlight-fade 15s forwards; border-left: 4px solid #4CAF50; background: linear-gradient(to right, #f8fff8 0%, #ffffff 100%); }
    @keyframes highlight-fade { 0% { background-color: #f2dbdb; border-color: #3f7d39; } 100% { background-color: white; border-color: transparent; } }

    .site-group { margin-bottom: 5px; }
    .site-header { padding: 8px 12px; margin-bottom: 8px; border-radius: 6px; font-weight: bold; font-size: 14px; color: #4b5f72; text-shadow: 0 1px 1px rgba(0,0,0,0.2); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }

    .import-export-controls { display: flex; gap: 5px; margin-bottom: 10px; flex-wrap: wrap; position: relative; z-index: 10; }
    .import-export-items { height: 270x; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px; padding: 5px; background: #f9f9f9; position: relative; z-index: 1; }
    .import-item { display: flex; align-items: center; gap: 5px; padding: 3px; border-bottom: 1px solid #eee; position: relative; z-index: 1; }
    .import-item:last-child { border-bottom: none; }
    .import-item-info { flex: 1; }
    .import-item-name { font-weight: bold; font-size: 12px; }
    .import-item-details { font-size: 11px; color: #667; }

    :root { --bg-primary: #f5f5f5; --bg-secondary: white; --text-primary: #333; --text-secondary: #668; --accent-color: #91c1c3; --border-color: #ddd; --padding-base: 15px; --margin-vertical: 8px; --margin-horizontal: 0px; --border-radius: 8px; --shadow-light: 0 2px 4px rgba(0,0,0,0.1); }
    [data-theme="compact"] { --padding-base: 8px; --margin-vertical: 2px; --margin-horizontal: 0px; --border-radius: 4px; }
    [data-theme="colorful"] { --bg-primary: #e8f4f8; --bg-secondary: #fff0f5; --accent-color: #ff6b6b; --text-primary: #2c3e50; --text-secondary: #7f8c8d; --border-color: #ffd6d6; }

    body { width: 350px; overflow-y: auto; padding: var(--padding-base); font-family: Arial; background: var(--bg-primary); color: var(--text-primary); position: relative; }
    .site-group { margin-bottom: var(--margin-vertical); }
    .site-item { margin: var(--margin-vertical) var(--margin-horizontal); padding: 8px; border-radius: var(--border-radius); background: var(--bg-secondary); box-shadow: var(--shadow-light); position: relative; }
    .product-link { color: var(--accent-color); text-decoration: none; font-weight: bold; display: block; margin-bottom: 3px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 340px; }
    .price-row { display: flex; justify-content: space-between; margin: 3px 0; }
    .history { margin-top: 6px; border-top: 1px dashed var(--border-color); padding-top: 6px; }

    [data-theme="compact"] body { font-size: 12px; }
    [data-theme="compact"] .site-item { padding: 4px 6px; }
    [data-theme="compact"] .price-row { margin: 1px 0; font-size: 12px; }
    [data-theme="compact"] .history { margin-top: 3px; padding-top: 3px; font-size: 11px; }
    [data-theme="compact"] .history-item { padding: 1px 0; font-size: 10px; }
    [data-theme="compact"] .product-link { font-size: 11px; margin-bottom: 2px; }
    [data-theme="compact"] .site-header { padding: 6px 10px; font-size: 12px; margin-bottom: 4px; }
    [data-theme="compact"] .delete-btn { top: 2px; right: 6px; }
    [data-theme="compact"] .delete-btn img { width: 14px; height: 14px; opacity: 0.5; }
    [data-theme="compact"] input[type="number"], [data-theme="compact"] input[type="text"], [data-theme="compact"] select { padding: 4px 6px; font-size: 14px; height: 22px; }
    [data-theme="compact"] .save-btn { padding: 4px 10px; font-size: 12px; height: 24px; }
    [data-theme="compact"] .action-btn { padding: 4px 10px; font-size: 12px; height: 24px; }
    [data-theme="compact"] .settings-row { margin-top: 6px; gap: 6px; }
    [data-theme="compact"] .settings-row:nth-child(2) input[type="number"], [data-theme="compact"] .settings-row:nth-child(3) input[type="number"] {  width: 40px;padding: 3px 4px; font-size: 10px; height: 20px; }
    [data-theme="compact"] .settings-container.visible { max-height: 160px; }
    [data-theme="compact"] .import-export-container.visible { max-height: 350px; }
    [data-theme="compact"] .import-export-items { max-height: 270px; padding: 6px; }
    [data-theme="compact"] .dev { margin-top: 5px; margin-bottom: 2px; }
    
.site-header {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  margin-bottom: 8px;
  border-radius: 6px;
  font-weight: bold;
  font-size: 14px;
  color: #4b5f72;
  text-shadow: 0 1px 1px rgba(0,0,0,0.2);
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  cursor: pointer;
  transition: background-color 0.2s;
  user-select: none;
}

.site-header:hover {
  opacity: 0.9;
}

.toggle-icon {
  transition: transform 0.2s;
}

.site-items {
  transition: all 0.3s ease;
}

/* Для компактной темы */
[data-theme="compact"] .site-header {
  padding: 6px 10px;
  font-size: 12px;
  margin-bottom: 4px;
}

[data-theme="compact"] .toggle-icon {
  font-size: 10px;
}

[data-theme="compact"] .item-count {
  font-size: 10px;
}    
  </style>
</head>
<body>
<button class="settings-btn" id="settingsButton">⚙</button>
<button class="import-export-btn" id="importExportButton">⇄</button>
<h3 style="margin-top: 5;">Отслеживаемые товары</h3>

<div class="settings-container" id="settingsContainer">
  <div class="settings-row">
    <span style="white-space: nowrap;">tg token:</span>
    <input type="text" id="tgToken" placeholder="Токен бота">
    <input type="hidden" id="tgId">
  </div>
  <div class="settings-row">
    <span style="white-space: nowrap;">Интервал</span>
    <input type="number" id="checkInterval" min="1" max="1440" placeholder="Мин">

    <span style="white-space: nowrap;">История</span>
    <input type="number" id="checkHistory" min="3" max="50" placeholder="Длина">
  </div>  
  <div class="settings-row">
    <span style="white-space: nowrap;">Тема:</span>
    <select id="theme">
      <option value="light">Светлая</option>
      <option value="compact">Компактная</option>
      <option value="colorful">Цветная</option>
    </select>
    <button class="save-btn" id="saveSettings">Сохранить</button>
  </div>
</div>

<div class="import-export-container" id="importExportContainer">
  <div class="import-export-controls">
    <button class="action-btn" id="selectAllBtn">Выбрать все</button>
    <button class="action-btn secondary" id="deselectAllBtn">Снять все</button>
    <button class="action-btn" id="exportBtn">Экспорт в файл</button>
    <button class="action-btn secondary" id="importBtn">Импорт из файла</button>
  </div>
  
  <div class="import-export-items" id="importExportItems">
    <!-- Здесь будут отображаться товары для экспорта -->
  </div>
  
  <div id="importExportStatus" style="margin-top: 10px; font-size: 12px; color: #667; text-align: center;"></div>
</div>

<div id="items" class="items-container"></div>
<script src="popup.js"></script>
<div class="dev">Seetoprice v1.2.2.2<br>Разработчик: oditynet</div>
</body>
</html>
